syntax = "proto3";

package messenger;

// The Service Definition
service MessengerService {
  // Sends a message destined for a specific IP/Port
  rpc Send (SendRequest) returns (SendResponse);

  // Retrieves all messages waiting for the requester's IP/Port
  rpc ReceiveAll (ReceiveRequest) returns (InboxResponse);
}

// Data Structures

message SendRequest {
  int32 id = 1;
  string msg = 2;
  string self_email = 3;
  string dest_email = 4; 
}

// Extensibility
message SendResponse {
  bool success = 1;
  string debug_message = 2;
}

message ReceiveRequest {
  string self_email = 1;
}

message InboxResponse {
  repeated SendRequest messages = 1; // Returns a list of the original message objects
}